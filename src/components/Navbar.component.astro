---
import Icon from "./icon.component.astro";

// Función para alternar la visibilidad del menú de navegación en móviles
const toggleMenu = () => {
  const menu = document.getElementById('mobile-menu');
  if (menu) {
    menu.classList.toggle('hidden');
  }
};

// Función para manejar el cambio de color de fondo del header al desplazarse
const handleScroll = () => {
  const header = document.querySelector('header');
  if (header) { // Verificación condicional para asegurarse de que 'header' no sea null
    if (window.scrollY > 50) {
      header.classList.add('bg-app-primary', 'shadow-lg');
    } else {
      header.classList.remove('bg-app-primary', 'shadow-lg');
    }
  }
};

// Añadir listener para el evento de scroll cuando el componente se monta
if (typeof window !== "undefined") {
  window.addEventListener('scroll', handleScroll);
}
---

<header class="bg-transparent text-app-terciary fixed w-full top-0 left-0 z-50 transition-colors duration-300 ease-in-out">
  <div class="container mx-auto flex items-center justify-between py-6 px-6">
    <!-- Logo -->
    <div class="flex items-center">
      <img src="/logo/logo.webp" alt="Logo" class="h-20"> <!-- Reemplaza 'logo.webp' con la ruta de tu logo -->
    </div>

    <!-- Menú de Navegación para Pantallas Grandes -->
    <nav class="hidden md:flex justify-end space-x-11 text-sm font-bold">
      <a href="#nosotros" class="hover:text-gray-300 flex items-center">Nosotros</a>
      <a href="#servicios" class="hover:text-gray-300 flex items-center">Servicios</a>
      <a href="#ubicacion" class="hover:text-gray-300 flex items-center">Ubicación</a>
      <a href="#mi-cuenta" class="flex items-center hover:text-gray-300">
        <Icon name="user" width={20} height={20} className="mr-2"/>
        Mi cuenta
      </a>
      <a href="#reservar-cita" class="bg-app-secondary text-app-terciary px-4 py-2 rounded hover:bg-red-500 transition duration-300 text-sm font-bold">Reservar cita</a>
    </nav>

    <!-- Botón de Menú de Hamburguesa para Móviles -->
    <button class="md:hidden flex items-center text-app-terciary" onclick="toggleMenu()">
      <Icon name="hamburger" width={30} height={30}/>
    </button>
  </div>

  <!-- Menú de Navegación para Pantallas Móviles -->
  <div id="mobile-menu" class="hidden md:hidden fixed inset-0 bg-app-primary text-app-terciary flex flex-col items-center justify-center px-6 py-4 gap-4">
    <!-- Botón de Cerrar para el Menú de Navegación Móvil -->
    <button class="absolute top-4 right-4 md:hidden flex items-center text-app-terciary" onclick="toggleMenu()">
      <Icon name="close" width={30} height={30}/>
    </button>

    <!-- Enlaces de Navegación -->
    <div class="flex items-center justify-center border border-gray-300 hover:bg-gray-500 rounded-lg p-2 w-full max-w-xs">
      <a href="#nosotros" class="hover:text-gray-300 flex items-center w-full justify-center">Nosotros</a>
    </div>
    <div class="flex items-center justify-center border border-gray-300 hover:bg-gray-500 rounded-lg p-2 w-full max-w-xs">
      <a href="#servicios" class="hover:text-gray-300 flex items-center w-full justify-center">Servicios</a>
    </div>
    <div class="flex items-center justify-center border border-gray-300 hover:bg-gray-500 rounded-lg p-2 w-full max-w-xs">
      <a href="#ubicacion" class="hover:text-gray-300 flex items-center w-full justify-center">Ubicación</a>
    </div>
    <div class="flex items-center justify-center border border-gray-300 hover:bg-gray-500 rounded-lg p-2 w-full max-w-xs">
      <a href="#mi-cuenta" class="flex items-center hover:text-gray-300 w-full justify-center">
        <Icon name="user" width={20} height={20} className="mr-2"/>
        Mi cuenta
      </a>
    </div>
    <div class="flex items-center justify-center border border-app-secondary bg-app-secondary hover:bg-red-500 rounded-lg p-2 w-full max-w-xs">
      <a href="#reservar-cita" class=" text-app-terciary px-4  rounded  transition duration-300 text-sm font-bold w-full text-center">Reservar cita</a>
    </div>
  </div>

</header>

<script is:inline>
  // Función para alternar la visibilidad del menú de navegación en móviles
  function toggleMenu() {
    const menu = document.getElementById('mobile-menu');
    if (menu) {
      menu.classList.toggle('hidden');
    }
  }

  // Función para manejar el cambio de color de fondo del header al desplazarse
  function handleScroll() {
    const header = document.querySelector('header');
    if (header) { // Verificación condicional para asegurarse de que 'header' no sea null
      if (window.scrollY > 50) {
        header.classList.add('bg-app-primary', 'shadow-lg');
      } else {
        header.classList.remove('bg-app-primary', 'shadow-lg');
      }
    }
  }

  // Añadir listener para el evento de scroll cuando el componente se monta
  if (typeof window !== "undefined") {
    window.addEventListener('scroll', handleScroll);
  }
</script>
