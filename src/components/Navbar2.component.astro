---
import Icon from "./icon.component.astro";

// Función para alternar la visibilidad del menú de navegación en móviles
const toggleMenu = () => {
  const menu = document.getElementById('mobile-menu');
  if (menu) {
    menu.classList.toggle('hidden');
  }
};

// Función para manejar el cambio de color de fondo del header al desplazarse
const handleScroll = () => {
  const header = document.querySelector('header');
  if (header) { // Verificación condicional para asegurarse de que 'header' no sea null
    if (window.scrollY > 50) {
      header.classList.add('bg-app-primary', 'shadow-lg');
    } else {
      header.classList.remove('bg-app-primary', 'shadow-lg');
    }
  }
};

// Añadir listener para el evento de scroll cuando el DOM esté completamente cargado
if (typeof window !== "undefined") {
  window.addEventListener('DOMContentLoaded', () => {
    window.addEventListener('scroll', handleScroll);
  });
}
---

<header class="bg-app-primary text-app-terciary w-full top-0 left-0 z-50 transition-colors duration-300 ease-in-out">
  <div class="container mx-auto flex items-center justify-between py-6 px-6">
    <!-- Logo -->
    <div class="flex items-center">
      <a href="/"><img src="/logo/logo.webp" alt="Logo" class="h-20"></a>
    </div>

    <!-- Menú de Navegación para Pantallas Grandes -->
    <nav class="hidden md:flex justify-end space-x-11 text-sm font-bold">
      <a href="/#sectionSobreNosotros-home" class="hover:text-gray-300 flex items-center">Nosotros</a>
      <a href="/#sectionNuestrosServicios-home" class="hover:text-gray-300 flex items-center">Servicios</a>
      <a href="/#sectionContacto-home" class="hover:text-gray-300 flex items-center">Contacto</a>
      <a href="/under-construction" class="flex items-center hover:text-gray-300">
        <Icon name="user" width={20} height={20} className="mr-2"/>
        Mi cuenta
      </a>
      <a href="/under-construction" class="border-2 border-app-secondary bg-app-secondary text-app-terciary px-4 py-2 rounded hover:bg-app-terciary hover:border-2 hover:border-app-secondary transition duration-300 text-sm font-bold hover:text-app-secondary">Reservar cita</a>
    </nav>

    <!-- Botón de Menú de Hamburguesa para Móviles -->
    <button class="md:hidden flex items-center text-app-terciary" onclick="toggleMenu()">
      <Icon name="hamburger" width={30} height={30}/>
    </button>
  </div>

  <!-- Menú de Navegación para Pantallas Móviles -->
  <div id="mobile-menu" class="hidden md:hidden fixed inset-0 bg-app-primary text-app-terciary flex flex-col items-center justify-center px-6 py-4 gap-4">
    <!-- Botón de Cerrar para el Menú de Navegación Móvil -->
    <button class="absolute top-4 right-4 md:hidden flex items-center text-app-terciary" onclick="toggleMenu()">
      <Icon name="close" width={30} height={30}/>
    </button>

    <!-- Enlaces de Navegación -->
    <div class="flex items-center justify-center border border-gray-300 hover:bg-gray-500 rounded-lg p-2 w-full max-w-xs">
      <a href="/#sectionSobreNosotros-home" class="hover:text-gray-300 flex items-center w-full justify-center">Nosotros</a>
    </div>
    <div class="flex items-center justify-center border border-gray-300 hover:bg-gray-500 rounded-lg p-2 w-full max-w-xs">
      <a href="/#sectionNuestrosServicios-home" class="hover:text-gray-300 flex items-center w-full justify-center">Servicios</a>
    </div>
    <div class="flex items-center justify-center border border-gray-300 hover:bg-gray-500 rounded-lg p-2 w-full max-w-xs">
      <a href="/#sectionContacto-home" class="hover:text-gray-300 flex items-center w-full justify-center">Contacto</a>
    </div>
    <div class="flex items-center justify-center border border-gray-300 hover:bg-gray-500 rounded-lg p-2 w-full max-w-xs">
      <a href="/under-construction" class="flex items-center hover:text-gray-300 w-full justify-center">
        <Icon name="user" width={20} height={20} className="mr-2"/>
        Mi cuenta
      </a>
    </div>
    <div class="flex items-center justify-center border border-app-secondary bg-app-secondary hover:bg-app-terciary hover:border-2 hover:border-app-secondary rounded-lg p-2 w-full max-w-xs">
      <a href="/under-construction" class=" text-app-terciary hover:text-app-secondary px-4  rounded  transition duration-300 text-sm font-semibold w-full text-center">Reservar cita</a>
    </div>
  </div>

</header>

<script is:inline>
  // Función para alternar la visibilidad del menú de navegación en móviles
  function toggleMenu() {
    const menu = document.getElementById('mobile-menu');
    if (menu) {
      menu.classList.toggle('hidden');
    }
  }

  // Función para manejar el cambio de color de fondo del header al desplazarse
// DESHABILITADO
//   function handleScroll() {
//     const header = document.querySelector('header');
//     if (header) { // Verificación condicional para asegurarse de que 'header' no sea null
//       if (window.scrollY > 50) {
//         header.classList.add('bg-app-primary', 'shadow-lg');
//       } else {
//         header.classList.remove('bg-app-primary', 'shadow-lg');
//       }
//     }
//   }

  // Añadir listener para el evento de scroll cuando el componente se monta
  if (typeof window !== "undefined") {
    window.addEventListener('DOMContentLoaded', () => {
      window.addEventListener('scroll', handleScroll);
    });
  }
</script>
